<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/dash.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>Dash</title>



  <div class="container_pai">
        
    <div class="div_lista">
        
        <ul class="container_lista">
            <img  class="container_santos" src="image/Santos_Logo.png">
            <li><a href="sobre.html">Sobre</a></li>
            <li><a href="contato.html">Contato</a></li>
            <li><a href="peleteste.html">Pelé </a></li>
            <li><a href="historia.html">Historia</a></li>
            <li><a href="cadastro.html">Cadastro</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
        <div id="container_time">

        </div>
    </div>
    <div class="container_texto">
    
    </div>
</head>

<body onload="cadastros()">
  
  <h2>Análise dos Gráficos</h2>
  <div class="content">
    <div class='container_pai'>
      <div class="graf" id='container_grafico'>
        <canvas id="myChart2" style="position: relative;width: 40vw; height: 40vh;"></canvas>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </div>

  </div>

</div>

<div id="sla"></div>
</body>

</html>

<script>
  
  function cadastros(){
fetch("/usuarios/cadastros")
.then(function(resposta){
  resposta.json().then(json=>{
    sla.innerHTML=  json[0].quantidade
    console.log(json)
  }
  )
}
)
    
  }
   




  fetch("/usuarios/listar")
    .then(function (resposta) {

      resposta.json().then(json => {
        var qtdVotosAdriano = json[0].qtdVotos;
        var qtdVotosArouca = json[1].qtdVotos;
        var qtdVotosDanilo = json[2].qtdVotos;
        var qtdVotosDurval = json[3].qtdVotos;
        var qtdVotosEduDracena = json[4].qtdVotos;
        var qtdVotosElano = json[5].qtdVotos;
        var qtdVotosGanso = json[6].qtdVotos;
        var qtdVotosLeo = json[7].qtdVotos;
        var qtdVotosNemyar = json[8].qtdVotos;
        var qtdVotosZeLove = json[9].qtdVotos;
        
        

        const ctx2 = document.getElementById('myChart2');

        new Chart(ctx2, {
          type: 'bar',
          data: {
            labels: [ 'Adriano', 'Arouca', 'Danilo', 'Durval', 'EduDracena', 'Elano', 'Ganso', 'Leo', 'Neymar', 'zeLove'],
            datasets: [{
              label: '# of Votes',
              data: [qtdVotosAdriano, qtdVotosArouca,qtdVotosDanilo,qtdVotosDurval,qtdVotosEduDracena,qtdVotosElano,qtdVotosGanso,qtdVotosLeo,qtdVotosNemyar,qtdVotosZeLove],
              borderWidth: 1

            }]

          },

          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });




      });

    }

    ).catch(function (erro) {
      console.log(erro);
    })




  const ctx2 = document.getElementById('myChart2');

  new Chart(ctx2, {
    type: 'bar',
    data: {
      labels: ['rafael', 'leo', 'eduDracena', 'durval', 'danilo', 'arouca', 'elano', 'ganso', 'adriano', 'neymar', 'zeLove'],
      datasets: [{
        label: '# of Votes',
        data: [],
        borderWidth: 1

      }]

    },

    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

</script>

<div>
  <canvas id="myChart2"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</script>